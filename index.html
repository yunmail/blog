<!DOCTYPE html>

<html lang="zh-CN">

<head>
  
  <title>Hexo</title>
  <meta charset="UTF-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  
  

  <link rel="shortcut icon" href="/favicon.ico" type="image/png" />
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/gh/nexmoe/nexmoe.github.io@latest/css/style.css,npm/highlight.js@9.15.8/styles/atom-one-dark.css,gh/nexmoe/nexmoe.github.io@latest/lib/mdui_043tiny/css/mdui.css,gh/nexmoe/nexmoe.github.io@latest/lib/iconfont/iconfont.css" crossorigin>
  
  <!--<link rel="stylesheet" href="/css/style.css?v=1591714365744">-->
<meta name="generator" content="Hexo 4.2.1"></head>

<body class="mdui-drawer-body-left">
  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
        <div class="mdui-toolbar-spacer"></div>
        <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
        <a href="/" title="John Doe" class="mdui-btn mdui-btn-icon"><img src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/avatar.png" alt="John Doe"></a>
       </div>
    </div>
  </div>
  <div id="nexmoe-header">
      <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="John Doe">
            <img src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/avatar.png" alt="John Doe" alt="John Doe">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>37</div>
        <div><span>标签</span>75</div>
        <div><span>分类</span>5</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about.html" title="关于博客">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博客
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/PY.html" title="我的朋友">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的朋友
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
        <form id="search_form" action_e="https://cn.bing.com/search?q=site:nexmoe.com" onsubmit="return search();">
            <label><input id="search_value" name="q" type="search" placeholder="搜索"></label>
        </form>
    </div>
</div>
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">社交按钮</h3>
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://space.bilibili.com/20238211" target="_blank" mdui-tooltip="{content: '哔哩哔哩'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/nexmoe/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a>
    </div>
</div>
  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章分类</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/hexo/">hexo</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/linux/">linux</a>
          <span class="category-list-count">1</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/linux教程/">linux教程</a>
          <span class="category-list-count">27</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/vps评测/">vps评测</a>
          <span class="category-list-count">5</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/windows教程/">windows教程</a>
          <span class="category-list-count">1</span>
        </li>

        
      </ul>

    </div>
  </div>


  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">标签云</h3>
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/tags/BT%E4%B8%8B%E8%BD%BD/" style="font-size: 10px;">BT下载</a> <a href="/tags/LEDE%E6%9B%B4%E6%94%B9%E6%BA%90/" style="font-size: 10px;">LEDE更改源</a> <a href="/tags/LEDE%E6%9B%B4%E6%96%B0frp/" style="font-size: 10px;">LEDE更新frp</a> <a href="/tags/LEDE%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/" style="font-size: 10px;">LEDE系统安装</a> <a href="/tags/LEDE%E7%BC%96%E8%AF%91/" style="font-size: 10px;">LEDE编译</a> <a href="/tags/MOON%E6%A0%B9%E7%9B%AE%E5%BD%95/" style="font-size: 10px;">MOON根目录</a> <a href="/tags/N2N%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B/" style="font-size: 10px;">N2N搭建教程</a> <a href="/tags/NPS%E6%90%AD%E5%BB%BA/" style="font-size: 10px;">NPS搭建</a> <a href="/tags/P2P%E7%BB%84%E7%BD%91/" style="font-size: 10px;">P2P组网</a> <a href="/tags/VPN%E7%BB%84%E7%BD%91/" style="font-size: 10px;">VPN组网</a> <a href="/tags/ZeroTier/" style="font-size: 10px;">ZeroTier</a> <a href="/tags/centos%E5%AE%89%E8%A3%85%E6%9C%80%E6%96%B0git/" style="font-size: 10px;">centos安装最新git</a> <a href="/tags/docker%E7%A6%BB%E7%BA%BF%E4%B8%8B%E8%BD%BD/" style="font-size: 10px;">docker离线下载</a> <a href="/tags/git%E5%AE%89%E8%A3%85/" style="font-size: 10px;">git安装</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/hexo%E9%83%A8%E7%BD%B2%E6%89%93%E8%B5%8F%E6%8F%92%E4%BB%B6/" style="font-size: 10px;">hexo部署打赏插件</a> <a href="/tags/https/" style="font-size: 10px;">https</a> <a href="/tags/https%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85/" style="font-size: 10px;">https一键安装</a> <a href="/tags/https%E4%BF%AE%E6%94%B9/" style="font-size: 10px;">https修改</a> <a href="/tags/https%E5%BC%80%E5%90%AFTls1-3/" style="font-size: 10px;">https开启Tls1.3</a> <a href="/tags/https%E9%83%A8%E7%BD%B2/" style="font-size: 10px;">https部署</a> <a href="/tags/instant-page/" style="font-size: 10px;">instant.page</a> <a href="/tags/jiacrontab%E6%90%AD%E5%BB%BA/" style="font-size: 10px;">jiacrontab搭建</a> <a href="/tags/kvm/" style="font-size: 10px;">kvm</a> <a href="/tags/lede%E7%BC%96%E8%AF%91/" style="font-size: 10px;">lede编译</a> <a href="/tags/linux%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95/" style="font-size: 10px;">linux免密登录</a> <a href="/tags/linux%E5%91%BD%E4%BB%A4/" style="font-size: 10px;">linux命令</a> <a href="/tags/linux%E5%AE%89%E8%A3%85%E6%9C%80%E6%96%B0%E7%89%88git/" style="font-size: 10px;">linux安装最新版git</a> <a href="/tags/linux%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/" style="font-size: 15px;">linux开机启动</a> <a href="/tags/linux%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8%E7%A8%8B%E5%BA%8F/" style="font-size: 10px;">linux开机启动程序</a> <a href="/tags/linux%E6%96%87%E4%BB%B6%E5%A4%8D%E5%88%B6/" style="font-size: 10px;">linux文件复制</a> <a href="/tags/linux%E6%9B%B4%E6%94%B9%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87/" style="font-size: 10px;">linux更改简体中文</a> <a href="/tags/linux%E7%B3%BB%E7%BB%9F/" style="font-size: 10px;">linux系统</a> <a href="/tags/linux%E8%84%9A%E6%9C%AC%E8%87%AA%E5%8A%A8%E8%BF%90/" style="font-size: 10px;">linux脚本自动运</a> <a href="/tags/linux%E8%AE%BE%E7%BD%AE%E5%AF%86%E9%92%A5%E7%99%BB%E9%99%86/" style="font-size: 10px;">linux设置密钥登陆</a> <a href="/tags/nginx%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8/" style="font-size: 10px;">nginx无法启动</a> <a href="/tags/openwrt%E4%BA%8C%E6%AC%A1%E7%BC%96%E8%AF%91/" style="font-size: 10px;">openwrt二次编译</a> <a href="/tags/openwrt%E5%9B%BA%E4%BB%B6%E7%BC%96%E8%AF%91/" style="font-size: 10px;">openwrt固件编译</a> <a href="/tags/openwrt%E6%9B%B4%E6%96%B0frpc/" style="font-size: 10px;">openwrt更新frpc</a> <a href="/tags/php%E5%8A%A0%E9%80%9F/" style="font-size: 10px;">php加速</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/ssh%E5%8A%A0%E5%9B%BA/" style="font-size: 15px;">ssh加固</a> <a href="/tags/ssh%E7%AB%AF%E5%8F%A3%E4%B8%80%E9%94%AE%E4%BF%AE%E6%94%B9/" style="font-size: 10px;">ssh端口一键修改</a> <a href="/tags/ssh%E7%AB%AF%E5%8F%A3%E4%BF%AE%E6%94%B9/" style="font-size: 10px;">ssh端口修改</a> <a href="/tags/ssh%E9%98%B2%E7%A0%B4%E8%A7%A3/" style="font-size: 10px;">ssh防破解</a> <a href="/tags/ssl%E9%83%A8%E7%BD%B2/" style="font-size: 10px;">ssl部署</a> <a href="/tags/tcp%E5%8A%A0%E9%80%9F/" style="font-size: 10px;">tcp加速</a> <a href="/tags/vim%E6%8A%80%E5%B7%A7/" style="font-size: 10px;">vim技巧</a> <a href="/tags/web%E9%82%AE%E7%AE%B1/" style="font-size: 10px;">web邮箱</a> <a href="/tags/wget%E6%95%99%E7%A8%8B/" style="font-size: 10px;">wget教程</a> <a href="/tags/%E4%B8%8D%E9%99%90%E6%B5%81%E9%87%8Fvps/" style="font-size: 10px;">不限流量vps</a> <a href="/tags/%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1/" style="font-size: 10px;">临时邮箱</a> <a href="/tags/%E4%BE%BF%E5%AE%9C%E7%9A%84vps/" style="font-size: 10px;">便宜的vps</a> <a href="/tags/%E5%86%85%E7%BD%91%E6%98%A0%E5%B0%84/" style="font-size: 10px;">内网映射</a> <a href="/tags/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" style="font-size: 20px;">内网穿透</a> <a href="/tags/%E5%88%86%E7%B1%BB%E5%AF%BC%E8%88%AA/" style="font-size: 10px;">分类导航</a> <a href="/tags/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/" style="font-size: 10px;">定时任务</a> <a href="/tags/%E5%AE%9A%E6%97%B6%E5%85%B3%E6%9C%BA/" style="font-size: 10px;">定时关机</a> <a href="/tags/%E5%AE%9D%E5%A1%94nginx%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8/" style="font-size: 10px;">宝塔nginx无法启动</a> <a href="/tags/%E5%AF%BC%E8%88%AA%E7%BD%91%E7%AB%99/" style="font-size: 10px;">导航网站</a> <a href="/tags/%E5%B1%80%E5%9F%9F%E7%BD%91%E7%BB%84%E5%BB%BA/" style="font-size: 10px;">局域网组建</a> <a href="/tags/%E5%BB%BA%E7%AB%99vps/" style="font-size: 10px;">建站vps</a> <a href="/tags/%E6%89%93%E8%B5%8F%E6%8F%92%E4%BB%B6/" style="font-size: 10px;">打赏插件</a> <a href="/tags/%E6%97%A0%E9%99%90%E9%87%8Fvps/" style="font-size: 10px;">无限量vps</a> <a href="/tags/%E6%97%A5%E6%9C%ACvps/" style="font-size: 10px;">日本vps</a> <a href="/tags/%E6%B4%9B%E6%9D%89%E7%9F%B6vps/" style="font-size: 10px;">洛杉矶vps</a> <a href="/tags/%E7%94%B5%E4%BF%A1%E8%81%94%E9%80%9A%E7%9B%B4%E8%BF%9E/" style="font-size: 10px;">电信联通直连</a> <a href="/tags/%E7%BD%91%E7%AB%99%E5%8A%A0%E9%80%9F/" style="font-size: 10px;">网站加速</a> <a href="/tags/%E7%BD%91%E7%AB%99%E5%8A%A0%E9%80%9FJS%E8%84%9A%E6%9C%AC/" style="font-size: 10px;">网站加速JS脚本</a> <a href="/tags/%E7%BD%91%E7%AB%99%E5%AF%BC%E8%88%AA/" style="font-size: 10px;">网站导航</a> <a href="/tags/%E8%87%AA%E5%8A%A8%E5%85%B3%E6%9C%BA/" style="font-size: 10px;">自动关机</a> <a href="/tags/%E8%B0%B7%E6%AD%8C%E4%BA%91%E5%BC%80%E5%90%AFroot%E5%AF%86%E7%A0%81%E7%99%BB%E9%99%86/" style="font-size: 10px;">谷歌云开启root密码登陆</a> <a href="/tags/%E8%B7%A8%E7%BD%91%E5%85%B1%E4%BA%AB/" style="font-size: 10px;">跨网共享</a> <a href="/tags/%E9%9F%A9%E5%9B%BDvps/" style="font-size: 10px;">韩国vps</a> <a href="/tags/%E9%AB%98%E9%80%9Fvps/" style="font-size: 10px;">高速vps</a>
    </div>
    
  </div>

  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章归档</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li></ul>
    </div>
  </div>


  
</aside>
    <div class="nexmoe-copyright">
        &copy; 2020 John Doe
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank">Nexmoe</a>
    </div>
</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
        <section class="nexmoe-posts">
    
    <div class="nexmoe-post">
        <a href="/2020/03/26/%E5%AE%9D%E5%A1%94%E9%9D%A2%E7%89%88nginx%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E8%AF%A6%E8%A7%A3/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="宝塔面版nginx无法启动详解" class="lazyload">
                    <h1>宝塔面版nginx无法启动详解</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2020年03月26日</a>
            <a><i class="nexmoefont icon-areachart"></i>97 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 1 分钟</a>
        </div>

        <article>
            
                <p>宝塔面板在面板设置里勾选了监听ipv6，正常情况下ipv4应该也是可以使用的，部分服务器出现问题的话会导致ipv4无法登陆。这里说下重置这个选项的方法。</p>
<p>在SSH里运行以下代码即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -f &#x2F;www&#x2F;server&#x2F;panel&#x2F;data&#x2F;ipv6.pl &amp;&amp; &#x2F;etc&#x2F;init.d&#x2F;bt restart</span><br></pre></td></tr></table></figure>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2020/02/13/Linux%E5%AE%9E%E7%8E%B0%E5%AF%86%E9%92%A5%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95-%E8%AE%A9Linux-VPS%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9B%B4%E5%AE%89%E5%85%A8/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="Linux实现密钥免密登录 让Linux VPS服务器更安全" class="lazyload">
                    <h1>Linux实现密钥免密登录 让Linux VPS服务器更安全</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2020年02月13日</a>
            <a><i class="nexmoefont icon-areachart"></i>756 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 3 分钟</a>
        </div>

        <article>
            
                <blockquote>
<p>这里的密钥对是 <code>Public key</code>，具体请参考 <a href="https://zh.wikipedia.org/zh/公开密钥加密" target="_blank" rel="noopener">公开密钥加密</a></p>
</blockquote>
<h2 id="将密钥保存到远程服务器"><a href="#将密钥保存到远程服务器" class="headerlink" title="将密钥保存到远程服务器"></a>将密钥保存到远程服务器</h2><p>1.如果是通过ssh-keygen生成的密钥对，那么我们需要将id_rsa.pub文件放置到你要进行远程登陆的用户主目录下，比如这里的用户名为centos，主目录为/home/centos，那么我们需要将id_rsa.pub公钥放置到/home/centos/.ssh目录下，然后执行以下操作：</p>
<p>使用命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>

<p>接下来会提示让你输入一个路径来保存密钥对，默认在 <code>~/.ssh/id_rsa</code> 下面生成 <code>id_rsa</code>（私钥）和 <code>id_rsa.pub</code>（公钥），如果没什么特殊需求就直接默认就好。</p>
<ul>
<li>将<code>id_rsa.pub</code>文件，重命名为 authorized_keys；</li>
<li>执行chmod 600 ./authorized_keys 命令，修改权限；</li>
<li>执行命令 sudo vi /etc/ssh/sshd_config进行配置，将RSAAuthentication 和 PubkeyAuthentication 后面的值都改成yes ，保存；</li>
<li>重启sshd服务，Debian/Ubuntu执行sudo /etc/init.d/ssh restart ；CentOS执行：sudo /etc/init.d/sshd restart。</li>
</ul>
<p>注：centos7重启服务方式与以前不同，请执行<code>systemctl restart sshd.service</code></p>
<p>2.如果是通过xshell方式生成的密钥对，那么将xshell生成的id_rsa.pub文件放置到用户的主目录下的.ssh目录(比如<code>/home/centos/.ssh</code>)，接下来执行的操作跟上述操作[1 ] 是一样的。</p>
<p>然后提示你输入密码（即本机使用 <code>SSH</code> 连接时的密码 #和服务器密码无关），也是直接回车默认为空即可。</p>
<h2 id="将公钥上传到服务器上"><a href="#将公钥上传到服务器上" class="headerlink" title="将公钥上传到服务器上"></a>将公钥上传到服务器上</h2><p>这里以使用 <code>SCP</code> 为例，上传公钥 <code>id_rsa.pub</code> 到服务器上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp ~/.ssh/id_rsa.pub root@139.59.22.131:~</span><br></pre></td></tr></table></figure>

<h2 id="将公钥追加到服务器的认证密钥中"><a href="#将公钥追加到服务器的认证密钥中" class="headerlink" title="将公钥追加到服务器的认证密钥中"></a>将公钥追加到服务器的认证密钥中</h2><p>将上传到服务器上的 <code>id_rsa.pub</code> 公钥追加到 <code>authorized_keys</code> 文件中，命令是</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>

<h2 id="修改服务器的配置以启用公钥认证"><a href="#修改服务器的配置以启用公钥认证" class="headerlink" title="修改服务器的配置以启用公钥认证"></a>修改服务器的配置以启用公钥认证</h2><p>修改 <code>vi /etc/ssh/sshd_config</code> 配置文件（如果有的话就进行修改，没有的话就添加进来）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">RSAAuthentication yes        # 启用 RSA 认证（默认是注释掉的，将注释去掉，如果不是 yes，改为 yes）</span><br><span class="line">PubkeyAuthentication yes     # 启用公钥认证（默认是注释掉的，将注释去掉，如果不是 yes，改为 yes）</span><br><span class="line">PasswordAuthentication no    # 禁止密码认证 (改为 no, 默认为 yes 是用密码认证)</span><br><span class="line">StrictModes no               # 修改为 no, 默认为 yes. 如果不修改用 key 登陆是出现 server refused our key(如果 StrictModes 为 yes 必需保证存放公钥的文件夹的拥有与登陆用户名是相同的.“StrictModes” 设置 ssh 在接收登录请求之前是否检查用户家目录和 rhosts 文件的权限和所有权。这通常是必要的，因为新手经常会把自己的目录和文件设成任何人都有写权限。)</span><br></pre></td></tr></table></figure>

<h2 id="重启-SSH-服务"><a href="#重启-SSH-服务" class="headerlink" title="重启 SSH 服务"></a>重启 <code>SSH</code> 服务</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service sshd restart</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">/etc/init.d/ssh restart</span><br></pre></td></tr></table></figure>

<h2 id="最后验证一下"><a href="#最后验证一下" class="headerlink" title="最后验证一下"></a>最后验证一下</h2><p>连接服务器，这里以 <code>SSH</code> 客户端为例</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@139.59.22.131</span><br></pre></td></tr></table></figure>

<p>然后，就直接连上了，不需要输入密码了呢 Ｏ(≧▽≦)Ｏ</p>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2020/02/02/openwrt-%E4%BF%AE%E6%94%B9feeds-conf-default%E4%B8%BAGitHub%E6%BA%90/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="openwrt 修改feeds.conf.default为GitHub源" class="lazyload">
                    <h1>openwrt 修改feeds.conf.default为GitHub源</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2020年02月02日</a>
            <a><i class="nexmoefont icon-areachart"></i>293 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 1 分钟</a>
        </div>

        <article>
            
                <p>lede和openwrt合并之后 lede官网挂了。。 git.openwrt.org，也访问不了。。</p>
<p>只好去github上找最新源码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;openwrt&#x2F;openwrt.git</span><br></pre></td></tr></table></figure>

<p>最新的lede</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b lede-17.01 https:&#x2F;&#x2F;github.com&#x2F;openwrt&#x2F;openwrt.git</span><br></pre></td></tr></table></figure>

<p>但是问题又来了，， <code>./script/feeds update -a</code> 又挂了，，</p>
<p>查看文件<code>feeds.conf.default</code> ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">src-git packages https:&#x2F;&#x2F;git.openwrt.org&#x2F;feed&#x2F;packages.git</span><br><span class="line">src-git luci https:&#x2F;&#x2F;git.openwrt.org&#x2F;project&#x2F;luci.git</span><br><span class="line">src-git routing https:&#x2F;&#x2F;git.openwrt.org&#x2F;feed&#x2F;routing.git</span><br><span class="line">src-git telephony https:&#x2F;&#x2F;git.openwrt.org&#x2F;feed&#x2F;telephony.git</span><br><span class="line">#src-git video https:&#x2F;&#x2F;github.com&#x2F;openwrt&#x2F;video.git</span><br><span class="line">#src-git targets https:&#x2F;&#x2F;github.com&#x2F;openwrt&#x2F;targets.git</span><br><span class="line">#src-git management https:&#x2F;&#x2F;github.com&#x2F;openwrt-management&#x2F;packages.git</span><br><span class="line">#src-git oldpackages http:&#x2F;&#x2F;git.openwrt.org&#x2F;packages.git</span><br><span class="line">#src-link custom &#x2F;usr&#x2F;src&#x2F;openwrt&#x2F;custom-feed</span><br></pre></td></tr></table></figure>

<p>git.openwrt.org访问不了，无法更新，只能使用github源地址： 更新如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">src-git packages https:&#x2F;&#x2F;github.com&#x2F;openwrt&#x2F;packages.git</span><br><span class="line">src-git luci https:&#x2F;&#x2F;github.com&#x2F;openwrt&#x2F;luci.git</span><br><span class="line">src-git routing https:&#x2F;&#x2F;github.com&#x2F;openwrt-routing&#x2F;packages.git</span><br><span class="line">src-git telephony https:&#x2F;&#x2F;github.com&#x2F;openwrt&#x2F;telephony.git</span><br><span class="line">src-git management https:&#x2F;&#x2F;github.com&#x2F;openwrt-management&#x2F;packages.git</span><br></pre></td></tr></table></figure>

<p>OK，<code>./script/feeds update -a</code>  可以了</p>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2020/01/30/%E5%B8%A6Web%E9%9D%A2%E6%9D%BF%E7%9A%84%E8%BD%BB%E9%87%8F%E7%BA%A7%EF%BC%8C%E9%AB%98%E6%80%A7%E8%83%BD%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E5%B7%A5%E5%85%B7%EF%BC%9Anps%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="带Web面板的轻量级，高性能内网穿透工具：nps搭建教程" class="lazyload">
                    <h1>带Web面板的轻量级，高性能内网穿透工具：nps搭建教程</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2020年01月30日</a>
            <a><i class="nexmoefont icon-areachart"></i>1.7k 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 7 分钟</a>
        </div>

        <article>
            
                <p><strong>说明：</strong>内网穿透工具之前已经介绍了不少了，比如<code>Frp</code>、<code>lanproxy</code>、<code>Holer</code>等，现在再介绍个带<code>Web</code>面板的穿透工具<code>nps</code>，之前叫<code>easyProxy</code>，只是改名了而已，该工具是一款使用<code>go</code>语言编写的轻量级、功能强大的内网穿透服务器。支持<code>tcp</code>、<code>udp</code>流量转发，支持内网<code>http</code>、<code>socks5</code>代理，同时支持<code>snappy</code>压缩(节省带宽和流量)、站点保护、加密传输、多路复用、<code>header</code>修改等。同时还支持<code>web</code>图形化管理。</p>
<h2 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>从 <a href="https://github.com/cnlh/nps/releases" target="_blank" rel="noopener">release</a> 下载和服务器匹配的最新版本到 ，如果对于<code>Linux</code>服务器还是不知道怎么选择的，这里拿<code>Vultr</code>、搬瓦工大多数<code>VPS</code>为例。先使用命令<code>getconf LONG_BIT</code>获取系统版本，<code>32</code>位就选<code>386</code>，<code>64</code>就选<code>amd64</code>，具体还是以实际情况为准。</p>
<h2 id="服务端使用"><a href="#服务端使用" class="headerlink" title="服务端使用"></a>服务端使用</h2><p>这里博主使用的是<code>Vultr Linux x64</code>服务器，直接使用命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#记得复制前先将下面链接替换成当前最新版地址</span><br><span class="line">cd ~</span><br><span class="line">#下载并解压服务端</span><br><span class="line">wget https:&#x2F;&#x2F;github.com&#x2F;ehang-io&#x2F;nps&#x2F;releases&#x2F;download&#x2F;v0.26.1&#x2F;linux_amd64_server.tar.gz &amp;&amp; tar zxvf linux_amd64_server.tar.gz</span><br><span class="line">#编辑配置文件</span><br><span class="line">cd nps</span><br><span class="line">vi conf&#x2F;nps.conf</span><br></pre></td></tr></table></figure>

<p>配置文件参数如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#web管理端口</span><br><span class="line">httpport</span><br><span class="line">#web界面管理密码</span><br><span class="line">password</span><br><span class="line">#服务端客户端通信端口</span><br><span class="line">bridePort</span><br><span class="line">#ssl certFile绝对路径</span><br><span class="line">pemPath</span><br><span class="line">#ssl keyFile绝对路径</span><br><span class="line">keyPath</span><br><span class="line">#域名代理https代理监听端口</span><br><span class="line">httpsProxyPort</span><br><span class="line">#域名代理http代理监听端口</span><br><span class="line">httpProxyPort</span><br><span class="line">#web api免验证IP地址</span><br><span class="line">authip</span><br><span class="line">#客户端与服务端连接方式kcp或tcp</span><br><span class="line">bridgeType</span><br></pre></td></tr></table></figure>

<h3 id="启动-amp-amp-验证"><a href="#启动-amp-amp-验证" class="headerlink" title="启动 &amp;&amp; 验证"></a>启动 &amp;&amp; 验证</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 启动命令</span><br><span class="line">&#123;nps_dir&#125;&#x2F;nps      ##&#123;nps_dir&#125;指的是nps所在目录</span><br></pre></td></tr></table></figure>

<p>然后打开地址<code>http://ip:8080</code>访问管理界面，具体端口以自己修改的为准，再使用密码登录进去，默认为<code>123</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#如果打不开Web界面，就需要开启防火墙，一般CentOS系统出现情况最多</span><br><span class="line">#Centos 6系统</span><br><span class="line">iptables -I INPUT -p tcp --dport 8080 -j ACCEPT</span><br><span class="line">service iptables save</span><br><span class="line">service iptables restart</span><br><span class="line"></span><br><span class="line">#CentOS 7系统</span><br><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;8080&#x2F;tcp --permanent </span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<p>对于有些服务器，比如阿里云，谷歌云等，还需要在服务器管理面板上开放<code>Web</code>端口才行。</p>
<h3 id="开机启动"><a href="#开机启动" class="headerlink" title="开机启动"></a>开机启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">tee &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;nps.service &lt;&lt;-&#39;EOF&#39;</span><br><span class="line">[Unit]</span><br><span class="line">Description&#x3D;nps server</span><br><span class="line">After&#x3D;network.target</span><br><span class="line">Documentation&#x3D;https:&#x2F;&#x2F;github.com&#x2F;cnlh&#x2F;nps</span><br><span class="line">[Service]</span><br><span class="line">User&#x3D;root</span><br><span class="line">Group&#x3D;root</span><br><span class="line">ExecStart&#x3D;&lt;nps_dir&gt;&#x2F;nps</span><br><span class="line">Restart&#x3D;always</span><br><span class="line">RestartSec&#x3D;30s</span><br><span class="line">[Install]</span><br><span class="line">WantedBy&#x3D;multi-user.target</span><br><span class="line">EOF</span><br><span class="line">systemctl enable nps</span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart nps</span><br><span class="line"># 查看日志, 是否启动</span><br><span class="line">journalctl -f -u nps</span><br></pre></td></tr></table></figure>

<h3 id="一键安装脚本-macos-linux"><a href="#一键安装脚本-macos-linux" class="headerlink" title="一键安装脚本(macos/linux)"></a>一键安装<a href="http://static.xinshangshangxin.com/shell-tools/nps/nps.sh" target="_blank" rel="noopener">脚本</a>(macos/linux)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -c &quot;$(wget -O - http:&#x2F;&#x2F;static.xinshangshangxin.com&#x2F;shell-tools&#x2F;nps&#x2F;nps.sh)&quot;</span><br></pre></td></tr></table></figure>

<h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><h3 id="下载客户端"><a href="#下载客户端" class="headerlink" title="下载客户端"></a>下载客户端</h3><p>从 <a href="https://github.com/cnlh/nps/releases" target="_blank" rel="noopener">release</a> 下载 <code>npc</code> 最新版本 到 </p>
<h3 id="无配置启动"><a href="#无配置启动" class="headerlink" title="无配置启动"></a>无配置启动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$&#123;nps_dir&#125;&#x2F;npc -server&#x3D;$&#123;server&#125; -vkey&#x3D;$&#123;vkey&#125;</span><br></pre></td></tr></table></figure>

<h3 id="一键安装启动脚本-macos-linux"><a href="#一键安装启动脚本-macos-linux" class="headerlink" title="一键安装启动脚本(macos/linux)"></a>一键安装启动<a href="http://static.xinshangshangxin.com/shell-tools/nps/npc.sh" target="_blank" rel="noopener">脚本</a>(macos/linux)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -c &quot;$(wget -O - http:&#x2F;&#x2F;static.xinshangshangxin.com&#x2F;shell-tools&#x2F;nps&#x2F;npc.sh)&quot;</span><br></pre></td></tr></table></figure>

<h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><p>关于使用场景，<code>Github</code>文档写的很清楚了，这里大概的说下。</p>
<p><strong>1、tcp隧道模式</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">适用：想在外网通过ssh连接内网的机器，做云服务器到内网服务器端口的映射，或者做微信公众号开发、小程序开发等。</span><br></pre></td></tr></table></figure>

<p>详细教程→<a href="https://github.com/cnlh/nps#tcp隧道" target="_blank" rel="noopener">点击查看</a>。</p>
<p><strong>2、udp隧道模式</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">适用：在非内网环境下使用内网dns，或者需要通过udp访问内网机器等。</span><br></pre></td></tr></table></figure>

<p>详细教程→<a href="https://github.com/cnlh/nps#udp隧道" target="_blank" rel="noopener">点击查看</a>。</p>
<p><strong>3、http代理模式</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">适用：在外网使用HTTP代理访问内网站点。</span><br></pre></td></tr></table></figure>

<p>详细教程→<a href="https://github.com/cnlh/nps#http正向代理" target="_blank" rel="noopener">点击查看</a>。</p>
<p><strong>4、socks5代理模式</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">适用：搭建一个内网穿透55，在外网如同使用内网v皮n一样访问内网资源或者设备。</span><br></pre></td></tr></table></figure>

<p>详细教程→<a href="https://github.com/cnlh/nps#socks5代理" target="_blank" rel="noopener">点击查看</a>。</p>
<h2 id="相关功能"><a href="#相关功能" class="headerlink" title="相关功能"></a>相关功能</h2><p><strong>1、数据压缩支持</strong><br>由于是内网穿透，内网客户端与服务端之间的隧道存在大量的数据交换，为节省流量，加快传输速度，由此本程序支持<code>SNNAPY</code>形式的压缩。</p>
<ul>
<li>所有模式均支持数据压缩，可以与加密同时使用</li>
<li>开启此功能会增加<code>cpu</code>和内存消耗</li>
<li>在<code>server</code>端加上参数<code>-compress=snappy</code>(或在<code>web</code>管理中设置)</li>
</ul>
<p><strong>2、加密传输</strong><br>如果公司内网防火墙对外网访问进行了流量识别与屏蔽，例如禁止了<code>ssh</code>协议等，通过设置配置文件，将服务端与客户端之间的通信内容加密传输，将会有效防止流量被拦截。</p>
<ul>
<li>开启此功能会增加<code>cpu</code>和内存消耗</li>
<li>在<code>server</code>端加上参数<code>-crypt=true</code>(或在web管理中设置)</li>
</ul>
<p><strong>3、站点保护</strong><br>域名代理模式所有客户端共用一个<code>http</code>服务端口，在知道域名后任何人都可访问，一些开发或者测试环境需要保密，所以可以设置用户名和密码，<code>nps</code>将通过<code>Http Basic Auth</code>来保护，访问时需要输入正确的用户名和密码。</p>
<ul>
<li><code>web</code>管理中可配置</li>
</ul>
<p><strong>4、host修改</strong><br>由于内网站点需要的<code>host</code>可能与公网域名不一致，域名代理支持<code>host</code>修改功能，即修改<code>request</code>的<code>header</code>中的<code>host</code>字段。</p>
<ul>
<li>在<code>web</code>管理中设置</li>
</ul>
<p><strong>5、自定义header</strong><br>支持对<code>header</code>进行新增或者修改，以配合服务的需要。</p>
<p><strong>6、404页面配置</strong><br>支持域名解析模式的自定义<code>404</code>页面，修改<code>/web/static/page/error.html</code>中内容即可，暂不支持静态文件等内容。</p>
<p><strong>7、流量限制</strong><br>支持客户端级流量限制，当该客户端入口流量与出口流量达到设定的总量后会拒绝服务，域名代理会返回<code>404</code>页面，其他会拒绝连接。</p>
<p><strong>8、带宽限制</strong><br>支持客户端级带宽限制，带宽计算方式为入口和出口总和，权重均衡。</p>
<p><strong>9、负载均衡</strong><br>本代理支持域名解析模式的负载均衡，在<code>web</code>域名添加或者编辑中内网目标分行填写多个目标即可实现轮训级别的负载均衡。</p>
<p><strong>10、守护进程</strong><br>本代理支持守护进程，使用示例如下，服务端客户端所有模式通用，支持<code>linux</code>、<code>darwin</code>、<code>windows</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;(nps|npc) start|stop|restart|status 若有其他参数可加其他参数</span><br><span class="line">(nps|npc).exe start|stop|restart|status 若有其他参数可加其他参数</span><br></pre></td></tr></table></figure>

<p><strong>11、KCP协议支持</strong><br><code>KCP</code>是一个快速可靠协议，能以比<code>TCP</code>浪费<code>10%-20%</code>的带宽的代价，换取平均延迟降低<code>30%-40%</code>，在弱网环境下对性能能有一定的提升。可在<code>app.conf</code>中修改<code>bridgeType</code>为<code>kcp</code>。</p>
<ul>
<li>当服务端为<code>kcp</code>时，客户端连接时也需要加上参数<code>-type=kcp</code>。</li>
</ul>
<p>该工具很强大，更多的使用可以自行研究，如果有人知道<code>Frp</code>管理面板的话，可以给博主提供下。</p>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2020/01/25/BT%E7%A6%BB%E7%BA%BF%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%A4%A7%E5%85%A8-Docker%E9%95%9C%E5%83%8F/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="BT离线下载安装大全-Docker镜像" class="lazyload">
                    <h1>BT离线下载安装大全-Docker镜像</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2020年01月25日</a>
            <a><i class="nexmoefont icon-areachart"></i>1.6k 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 8 分钟</a>
        </div>

        <article>
            
                <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>随着大家对离线下载的需求越来越高，这里就找了一些用户量比较多，也经常在维护的<code>BT</code>离线程序的<code>Docker</code>镜像，包括<code>Aria2</code>、<code>utorrent</code>、<code>Deluge</code>、<code>Transmission</code>、<code>Rutorrent</code>、<code>Qbittorrent</code>，算是比较全了，这里就分享下。</p>
<hr>
<h2 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h2><p>首先安装下面程序之前，需要在服务器上安装<code>Docker</code>环境，使用命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#CentOS 6系统</span><br><span class="line">rpm -iUvh http:&#x2F;&#x2F;dl.fedoraproject.org&#x2F;pub&#x2F;epel&#x2F;6&#x2F;x86_64&#x2F;epel-release-6-8.noarch.rpm</span><br><span class="line">yum update -y</span><br><span class="line">yum -y install docker-io</span><br><span class="line">service docker start</span><br><span class="line">chkconfig docker on</span><br><span class="line"></span><br><span class="line">#CentOS 7、Debian、Ubuntu系统</span><br><span class="line">curl -sSL https:&#x2F;&#x2F;get.docker.com&#x2F; | sh</span><br><span class="line">systemctl start docker</span><br><span class="line">systemctl enable docker</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="安装Aria2"><a href="#安装Aria2" class="headerlink" title="安装Aria2"></a>安装Aria2</h2><p><strong>镜像来源：</strong><a href="https://hub.docker.com/r/onisuly/aria2-with-webui" target="_blank" rel="noopener">https://hub.docker.com/r/onisuly/aria2-with-webui</a></p>
<p>先安装<code>Docker</code>，然后执行以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run --restart&#x3D;always --name aria2-ariang -d \</span><br><span class="line">-p 6060:80 \</span><br><span class="line">-p 6800:6800 \</span><br><span class="line">-e SECRET&#x3D;quchaonet \</span><br><span class="line">-v ~&#x2F;aria2&#x2F;down:&#x2F;data \</span><br><span class="line">-v ~&#x2F;aria2&#x2F;conf:&#x2F;conf \</span><br><span class="line">onisuly&#x2F;aria2-with-webui</span><br></pre></td></tr></table></figure>

<p>安装完成后，相关信息如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AriaNg地址：http:&#x2F;&#x2F;ip:6060</span><br><span class="line">aria2连接端口：6800</span><br><span class="line">aria2连接密匙：quchaonet</span><br><span class="line">下载&#x2F;配置目录：~&#x2F;aria2</span><br></pre></td></tr></table></figure>

<p><code>CentOS</code>系统安装后，可能还需要开启相应的端口，大致如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#CentOS 6</span><br><span class="line">iptables -I INPUT -p tcp --dport 6060 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp --dport 6800 -j ACCEPT</span><br><span class="line">service iptables save</span><br><span class="line">service iptables restart</span><br><span class="line"></span><br><span class="line">#CentOS 7</span><br><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;6060&#x2F;tcp --permanent</span><br><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;6800&#x2F;tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<p>如果你不想用了，可以使用以下命令卸载：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#删掉容器</span><br><span class="line">ContainerID&#x3D;&#96;docker ps|grep onisuly&#x2F;aria2-with-webui|awk &#39;&#123;print $1&#125;&#39;&#96;</span><br><span class="line">docker kill $&#123;ContainerID&#125;</span><br><span class="line">docker rm $&#123;ContainerID&#125;</span><br><span class="line">docker rmi &#96;docker images|grep onisuly&#x2F;aria2-with-webui|awk &#39;&#123;print $3&#125;&#39;&#96;</span><br><span class="line">#删掉下载文件夹</span><br><span class="line">rm -rf ~&#x2F;aria2</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="安装utorrent"><a href="#安装utorrent" class="headerlink" title="安装utorrent"></a>安装utorrent</h2><p><strong>镜像来源：</strong><a href="https://hub.docker.com/r/ekho/utorrent" target="_blank" rel="noopener">https://hub.docker.com/r/ekho/utorrent</a></p>
<p>先安装<code>Docker</code>，然后执行以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run --restart&#x3D;always --name utorrent -d \</span><br><span class="line">-p 8080:8080 \</span><br><span class="line">-p 6881:6881 \</span><br><span class="line">-v ~&#x2F;utorrent:&#x2F;utorrent&#x2F;data \</span><br><span class="line">ekho&#x2F;utorrent</span><br></pre></td></tr></table></figure>

<p>如果你不想用了，可以使用以下命令卸载：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#删掉容器</span><br><span class="line">ContainerID&#x3D;&#96;docker ps|grep ekho&#x2F;utorrent|awk &#39;&#123;print $1&#125;&#39;&#96;</span><br><span class="line">docker kill $&#123;ContainerID&#125;</span><br><span class="line">docker rm $&#123;ContainerID&#125;</span><br><span class="line">docker rmi &#96;docker images|grep ekho&#x2F;utorrent|awk &#39;&#123;print $3&#125;&#39;&#96;</span><br><span class="line">#删掉下载文件夹</span><br><span class="line">rm -rf ~&#x2F;utorrent</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="安装Deluge"><a href="#安装Deluge" class="headerlink" title="安装Deluge"></a>安装Deluge</h2><p><strong>镜像来源：</strong><a href="https://hub.docker.com/r/linuxserver/deluge" target="_blank" rel="noopener">https://hub.docker.com/r/linuxserver/deluge</a></p>
<p>先安装<code>Docker</code>，然后执行以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run --restart&#x3D;always --name deluge -d \</span><br><span class="line">--net&#x3D;host \</span><br><span class="line">-v ~&#x2F;deluge&#x2F;config:&#x2F;config \</span><br><span class="line">-v ~&#x2F;deluge&#x2F;downloads:&#x2F;downloads \</span><br><span class="line">linuxserver&#x2F;deluge</span><br></pre></td></tr></table></figure>

<p>安装完成后，相关信息如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">deluge地址：http:&#x2F;&#x2F;ip:8112</span><br><span class="line">访问密码：deluge</span><br><span class="line">配置&#x2F;下载目录：~&#x2F;deluge</span><br></pre></td></tr></table></figure>

<p>进入界面后，记得点击上方的<code>Preferences</code>，将下载目录设置为<code>/downloads</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#删掉容器</span><br><span class="line">ContainerID&#x3D;&#96;docker ps|grep linuxserver&#x2F;deluge|awk &#39;&#123;print $1&#125;&#39;&#96;</span><br><span class="line">docker kill $&#123;ContainerID&#125;</span><br><span class="line">docker rm $&#123;ContainerID&#125;</span><br><span class="line">docker rmi &#96;docker images|grep linuxserver&#x2F;deluge|awk &#39;&#123;print $3&#125;&#39;&#96;</span><br><span class="line">#删掉下载文件夹</span><br><span class="line">rm -rf ~&#x2F;deluge</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="安装Transmission"><a href="#安装Transmission" class="headerlink" title="安装Transmission"></a>安装Transmission</h2><p><strong>镜像来源：</strong><a href="https://hub.docker.com/r/linuxserver/transmission" target="_blank" rel="noopener">https://hub.docker.com/r/linuxserver/transmission</a></p>
<p>先安装<code>Docker</code>，然后执行以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">docker run --restart&#x3D;always --name transmission -d \</span><br><span class="line">-e TRANSMISSION_WEB_HOME&#x3D;&#x2F;transmission-web-control&#x2F; \</span><br><span class="line">-e USER&#x3D;quchaonet \</span><br><span class="line">-e PASS&#x3D;qucahonet \</span><br><span class="line">-p 9091:9091 \</span><br><span class="line">-p 51413:51413 \</span><br><span class="line">-p 51413:51413&#x2F;udp \</span><br><span class="line">-v ~&#x2F;transmission&#x2F;config:&#x2F;config \</span><br><span class="line">-v ~&#x2F;transmission&#x2F;downloads:&#x2F;downloads \</span><br><span class="line">-v ~&#x2F;transmission&#x2F;watch:&#x2F;watch \</span><br><span class="line">linuxserver&#x2F;transmission</span><br></pre></td></tr></table></figure>

<p>安装完成后，相关信息如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">transmission地址：http:&#x2F;&#x2F;ip:9091</span><br><span class="line">访问用户名：quchaonet</span><br><span class="line">访问密码：quchaonet</span><br><span class="line">配置&#x2F;下载目录：~&#x2F;transmission</span><br></pre></td></tr></table></figure>

<p><code>CentOS</code>系统安装后，可能还需要开启相应的端口，大致如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#CentOS 6</span><br><span class="line">iptables -I INPUT -p tcp --dport 9091 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp --dport 51413 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p udp --dport 51413 -j ACCEPT</span><br><span class="line">service iptables save</span><br><span class="line">service iptables restart</span><br><span class="line"></span><br><span class="line">#CentOS 7</span><br><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;9091&#x2F;tcp --permanent</span><br><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;51413&#x2F;tcp --permanent</span><br><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;51413&#x2F;udp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<p>如果你不想用了，可以使用以下命令卸载：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#删掉容器</span><br><span class="line">ContainerID&#x3D;&#96;docker ps|grep linuxserver&#x2F;transmission|awk &#39;&#123;print $1&#125;&#39;&#96;</span><br><span class="line">docker kill $&#123;ContainerID&#125;</span><br><span class="line">docker rm $&#123;ContainerID&#125;</span><br><span class="line">docker rmi &#96;docker images|grep linuxserver&#x2F;transmission|awk &#39;&#123;print $3&#125;&#39;&#96;</span><br><span class="line">#删掉下载文件夹</span><br><span class="line">rm -rf ~&#x2F;transmission</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="安装Rutorrent"><a href="#安装Rutorrent" class="headerlink" title="安装Rutorrent"></a>安装Rutorrent</h2><p><strong>镜像来源：</strong><a href="https://hub.docker.com/r/linuxserver/rutorrent" target="_blank" rel="noopener">https://hub.docker.com/r/linuxserver/rutorrent</a></p>
<p>先安装<code>Docker</code>，然后执行以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run --restart&#x3D;always --name rutorrent -d \</span><br><span class="line">-p 2222:80 \</span><br><span class="line">-p 5000:5000 \</span><br><span class="line">-p 51413:51413 \</span><br><span class="line">-p 6881:6881&#x2F;udp \</span><br><span class="line">-v ~&#x2F;rutorrent&#x2F;config:&#x2F;config \</span><br><span class="line">-v ~&#x2F;rutorrent&#x2F;downloads:&#x2F;downloads \</span><br><span class="line">linuxserver&#x2F;rutorrent</span><br></pre></td></tr></table></figure>

<p>安装完成后，相关信息如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rutorrent地址：http:&#x2F;&#x2F;ip:2222</span><br><span class="line">配置&#x2F;下载目录：~&#x2F;rutorrent</span><br></pre></td></tr></table></figure>

<p><code>CentOS</code>系统安装后，可能还需要开启相应的端口，大致如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#CentOS 6</span><br><span class="line">iptables -I INPUT -p tcp --dport 2222 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp --dport 5000 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp --dport 51413 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p udp --dport 6881 -j ACCEPT</span><br><span class="line">service iptables save</span><br><span class="line">service iptables restart</span><br><span class="line"></span><br><span class="line">#CentOS 7</span><br><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;2222&#x2F;tcp --permanent</span><br><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;5000&#x2F;tcp --permanent</span><br><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;51413&#x2F;tcp --permanent</span><br><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;6881&#x2F;udp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<p>如果你不想用了，可以使用以下命令卸载：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#删掉容器</span><br><span class="line">ContainerID&#x3D;&#96;docker ps|grep linuxserver&#x2F;rutorrent|awk &#39;&#123;print $1&#125;&#39;&#96;</span><br><span class="line">docker kill $&#123;ContainerID&#125;</span><br><span class="line">docker rm $&#123;ContainerID&#125;</span><br><span class="line">docker rmi &#96;docker images|grep linuxserver&#x2F;rutorrent|awk &#39;&#123;print $3&#125;&#39;&#96;</span><br><span class="line">#删掉下载文件夹</span><br><span class="line">rm -rf ~&#x2F;rutorrent</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="安装Qbittorrent"><a href="#安装Qbittorrent" class="headerlink" title="安装Qbittorrent"></a>安装Qbittorrent</h2><p><strong>镜像来源：</strong><a href="https://hub.docker.com/r/linuxserver/qbittorrent" target="_blank" rel="noopener">https://hub.docker.com/r/linuxserver/qbittorrent</a></p>
<p>先安装<code>Docker</code>，然后执行以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run --restart&#x3D;always --name qbittorrent -d \</span><br><span class="line">-p 6881:6881 \</span><br><span class="line">-p 6881:6881&#x2F;udp \</span><br><span class="line">-p 8080:8080 \</span><br><span class="line">-v ~&#x2F;qbittorrent&#x2F;config:&#x2F;config \</span><br><span class="line">-v ~&#x2F;qbittorrent&#x2F;downloads:&#x2F;downloads \</span><br><span class="line">linuxserver&#x2F;qbittorrent</span><br></pre></td></tr></table></figure>

<p>安装完成后，相关信息如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">qbittorrent地址：http:&#x2F;&#x2F;ip:8080</span><br><span class="line">用户名：admin</span><br><span class="line">密码：adminadmin</span><br><span class="line">配置和&#x2F;下载目录：~&#x2F;qbittorrent</span><br></pre></td></tr></table></figure>

<p><code>CentOS</code>系统安装后，可能还需要开启相应的端口，大致如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#CentOS 6</span><br><span class="line">iptables -I INPUT -p tcp --dport 8080 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p tcp --dport 6881 -j ACCEPT</span><br><span class="line">iptables -A INPUT -p udp --dport 6881 -j ACCEPT</span><br><span class="line">service iptables save</span><br><span class="line">service iptables restart</span><br><span class="line"></span><br><span class="line">#CentOS 7</span><br><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;8080&#x2F;tcp --permanent</span><br><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;6881&#x2F;tcp --permanent</span><br><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;6881&#x2F;udp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<p>如果你不想用了，可以使用以下命令卸载：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#删掉容器</span><br><span class="line">ContainerID&#x3D;&#96;docker ps|grep linuxserver&#x2F;qbittorrent|awk &#39;&#123;print $1&#125;&#39;&#96;</span><br><span class="line">docker kill $&#123;ContainerID&#125;</span><br><span class="line">docker rm $&#123;ContainerID&#125;</span><br><span class="line">docker rmi &#96;docker images|grep linuxserver&#x2F;qbittorrent|awk &#39;&#123;print $3&#125;&#39;&#96;</span><br><span class="line">#删掉下载文件夹</span><br><span class="line">rm -rf ~&#x2F;qbittorrent</span><br></pre></td></tr></table></figure>

<p>这里顺便推荐个磁力链接聚合搜索<code>magnetW</code>，有兴趣的可以下载<code>Windows/Mac</code>端应用程序，下载地址→<a href="https://magnetw.app/guide/install.html" target="_blank" rel="noopener">传送门</a>。</p>
<p>最后这里只列举简单的安装，更深层次的可以访问镜像地址使用</p>
<blockquote>
<p>本文为选摘文章，版权归 <a href="https://www.moerats.com/" target="_blank" rel="noopener">Rat’s</a> 所有，转载请注明出处！</p>
</blockquote>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2019/12/20/Openwrt-%E4%BA%8C%E6%AC%A1%E7%BC%96%E8%AF%91%E5%9F%BA%E6%9C%AC%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="Openwrt | 二次编译基本常用命令" class="lazyload">
                    <h1>Openwrt | 二次编译基本常用命令</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2019年12月20日</a>
            <a><i class="nexmoefont icon-areachart"></i>125 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 1 分钟</a>
        </div>

        <article>
            
                <p>之前写过一篇<a href="https://opt.gs/posts/580/" target="_blank" rel="noopener">《自编译Lean的Openwrt固件全攻略》</a>，相信不少小伙伴已经自己成功编译了自己个性化固件，今天给大家分享一下如何进行二次编译。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd lede                                                   #进入LEDE目录</span><br><span class="line">git pull                                                  #同步更新源码</span><br><span class="line">.&#x2F;scripts&#x2F;feeds update -a &amp;&amp; .&#x2F;scripts&#x2F;feeds install -a   #更新FEEDS</span><br><span class="line">rm -rf .&#x2F;tmp &amp;&amp; rm -rf .config                            #清除编译配置和缓存</span><br><span class="line">make menuconfig                                           #进入编译配置菜单</span><br><span class="line">make V&#x3D;s -j$(nproc)                                       #多线程编译</span><br></pre></td></tr></table></figure>



            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2019/11/30/%E8%87%AA%E7%BC%96%E8%AF%91Lean%E7%9A%84Openwrt%E5%9B%BA%E4%BB%B6%E5%85%A8%E6%94%BB%E7%95%A5/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="自编译Lean的Openwrt固件全攻略" class="lazyload">
                    <h1>自编译Lean的Openwrt固件全攻略</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2019年11月30日</a>
            <a><i class="nexmoefont icon-areachart"></i>3.9k 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 19 分钟</a>
        </div>

        <article>
            
                <h2 id="软路由"><a href="#软路由" class="headerlink" title="软路由"></a>软路由</h2><p>之前自己配了一台软路由，3205的cpu+8G内存，一直使用Koolshare的LEDE，<strong>但是koolss插件已经长期停止更新</strong>，而且各种问题，经常死机，说实话算不上一个很好的固件。</p>
<p>后来在网上找其他固件，发现LEAN的LEDE固件非常不错，主要是冲着SSR-plus去的，但是研究了一下发现，这个固件那个是非常的高端啊，要自己用ubuntu编译。</p>
<p>说高端就是高端，不得不说lean大佬这个做的太nb了，用作者的原话是：</p>
<blockquote>
<p>如果你自认为 Koolshare 论坛或者其固件的脑残粉，本人不欢迎你使用本源代码。所以如果你是，那么使用过程中遇到任何问题本人概不回应。</p>
</blockquote>
<p><strong>作者的Github地址：<a href="https://github.com/coolsnowwolf/lede" target="_blank" rel="noopener">https://github.com/coolsnowwolf/lede</a></strong></p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><ul>
<li>不要用 root 用户 git 和编译！！！</li>
<li>国内用户编译前最好准备好梯子</li>
<li>默认登陆IP 192.168.1.1, 密码 password</li>
</ul>
<h3 id="Ubuntu新建账户"><a href="#Ubuntu新建账户" class="headerlink" title="Ubuntu新建账户"></a>Ubuntu新建账户</h3><p>需要准备一个干净的Ubuntu，不能用root账户，最好在国外。我用的是阿里云的香港轻量，ubuntu 18.04。</p>
<ol>
<li>创建用户：vagrant为用户名</li>
</ol>
<p>   sudo useradd -m vagrant -d /home/vagrant -s /bin/bash</p>
<p>2、为创建的用户设置密码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd vagrant</span><br></pre></td></tr></table></figure>

<p>3、修改用户的权限：（ /etc/sudoers文件只有r权限，在改动前需要增加w权限，改动后，再去掉w权限 ）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(1)为sudoers增加写入权限</span><br><span class="line">      sudo chmod +w &#x2F;etc&#x2F;sudoers</span><br><span class="line">      sudo vim &#x2F;etc&#x2F;sudoers</span><br><span class="line">(2)为用户XXX添加读写权限</span><br><span class="line">      # User privilege specification </span><br><span class="line">      root　ALL&#x3D;(ALL:ALL) ALL</span><br><span class="line">      vagrant ALL&#x3D;(ALL:ALL) ALL    &#x2F;&#x2F; 这一行为新添加的代码</span><br><span class="line">(3)将sudoers文件的操作权限改为只读模式</span><br></pre></td></tr></table></figure>

<h3 id="安装必备组件"><a href="#安装必备组件" class="headerlink" title="安装必备组件"></a>安装必备组件</h3><p>命令行输入 sudo apt-get update ，然后输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -y install build-essential asciidoc binutils bzip2 gawk gettext git libncurses5-dev libz-dev patch unzip zlib1g-dev lib32gcc1 libc6-dev-i386 subversion flex uglifyjs git-core gcc-multilib p7zip p7zip-full msmtp libssl-dev texinfo libglib2.0-dev xmlto qemu-utils upx libelf-dev autoconf automake libtool autopoint</span><br></pre></td></tr></table></figure>

<h2 id="开始编译"><a href="#开始编译" class="headerlink" title="开始编译"></a>开始编译</h2><h3 id="Clone源码"><a href="#Clone源码" class="headerlink" title="Clone源码"></a>Clone源码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;coolsnowwolf&#x2F;lede 命令下载好源代码，然后 cd lede 进入目录</span><br></pre></td></tr></table></figure>

<h3 id="配置编译"><a href="#配置编译" class="headerlink" title="配置编译"></a>配置编译</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;scripts&#x2F;feeds update -a </span><br><span class="line">.&#x2F;scripts&#x2F;feeds install -a</span><br><span class="line">make menuconfig</span><br></pre></td></tr></table></figure>

<p>之后进入如下界面，这实际上是一个配置界面，用来配置编译的配置，并不是编译的过程。</p>
<p><a href="https://imgki.com/usr/uploads/2019/09/3102421826.png" target="_blank" rel="noopener"><img data-sizes="auto" data-src="https://imgki.com/usr/uploads/2019/09/3102421826.png" alt="oplean1-1.png" class="lazyload"></a><br>进入Target System和Subtarget勾选你需要编译的平台，我用的是X86，并且是64位的，所以你需要选择自助选择。<br><a href="https://imgki.com/usr/uploads/2019/09/3433535562.png" target="_blank" rel="noopener"><img data-sizes="auto" data-src="https://imgki.com/usr/uploads/2019/09/3433535562.png" alt="oplean1-2.png" class="lazyload"></a><br>进入Target Images勾选你需要的固件格式等(img、vmdk等这里我保持默认，默认也够用了吧？)<br><a href="https://imgki.com/usr/uploads/2019/09/2458172706.png" target="_blank" rel="noopener"><img data-sizes="auto" data-src="https://imgki.com/usr/uploads/2019/09/2458172706.png" alt="oplean1-3.png" class="lazyload"></a><br>进入LuCI–&gt;Applications内选中你需要的插件<br><a href="https://imgki.com/usr/uploads/2019/09/2533905169.png" target="_blank" rel="noopener"><img data-sizes="auto" data-src="https://imgki.com/usr/uploads/2019/09/2533905169.png" alt="oplean1-4.png" class="lazyload"></a><br><a href="https://imgki.com/usr/uploads/2019/09/99712410.png" target="_blank" rel="noopener"><img data-sizes="auto" data-src="https://imgki.com/usr/uploads/2019/09/99712410.png" alt="oplean1-5.png" class="lazyload"></a></p>
<p>在这里有一些别的选项，比如一些VPN、aria2的web管理等等，根据需要自己进去研究。</p>
<p>勾选完需要的东西就可以退回第一个界面保存退出，保存按默认的文件名称(.config）保存即可，不需要修改。编译会根据.config的内容编译，想要恢复到初始配置删掉.config文件即可。</p>
<p>在编译的过程中，要下载一些组件什么的，如果你不翻墙，下载速度会非常慢，甚至下载不下来。</p>
<h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><p>保存后执行以下命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make -j1 V&#x3D;s    &#x2F;&#x2F;第一次编译非常的慢，要花上一两个小时</span><br></pre></td></tr></table></figure>

<p><a href="https://imgki.com/usr/uploads/2019/09/53805221.png" target="_blank" rel="noopener"><img data-sizes="auto" data-src="https://imgki.com/usr/uploads/2019/09/53805221.png" alt="Snipaste_2019-09-15_22-31-56.png" class="lazyload"></a></p>
<h3 id="取得固件"><a href="#取得固件" class="headerlink" title="取得固件"></a>取得固件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd bin&#x2F;targets&#x2F;x86&#x2F;64        注：这个bin目录在你克隆源码的lede路径下，非根目录下的bin目录</span><br></pre></td></tr></table></figure>

<h2 id="二次编译"><a href="#二次编译" class="headerlink" title="二次编译"></a>二次编译</h2><p>cd lede 进入LEDE目录<br>git pull 同步更新大雕源码<br>./scripts/feeds update -a &amp;&amp; ./scripts/feeds install -a 更新FEEDS<br>rm -rf ./tmp &amp;&amp; rm -rf .config 清除编译配置和缓存<br>make menuconfig 进入编译配置菜单<br>make -j1 V=s n=线程数+1，例如4线程的I5填-j5，开始编译<br>编译完成后固件输出在/lede/bin/targets</p>
<h2 id="LEAN大佬原版的说明"><a href="#LEAN大佬原版的说明" class="headerlink" title="LEAN大佬原版的说明"></a>LEAN大佬原版的说明</h2><p>其实Lean在自己的github中说的很明白了<br>﻿Welcome to Lean’s git source of OpenWrt and packages</p>
<p>中文：如何编译自己需要的 OpenWrt 固件</p>
<p>注意：</p>
<ol>
<li>不要用 root 用户 git 和编译！！！</li>
<li>国内用户编译前最好准备好梯子</li>
<li>默认登陆IP 192.168.1.1, 密码 password</li>
</ol>
<p>编译命令如下:</p>
<ol>
<li>首先装好 Ubuntu 64bit，推荐 Ubuntu 14 LTS x64</li>
<li>命令行输入 sudo apt-get update ，然后输入</li>
<li>apt-get -y install build-essential asciidoc binutils bzip2 gawk gettext git libncurses5-dev libz-dev patch unzip zlib1g-dev lib32gcc1 libc6-dev-i386 subversion flex uglifyjs git-core gcc-multilib p7zip p7zip-full msmtp libssl-dev texinfo libglib2.0-dev xmlto qemu-utils upx libelf-dev autoconf automake libtool autopoint</li>
<li>git clone <a href="https://github.com/coolsnowwolf/lede" target="_blank" rel="noopener">https://github.com/coolsnowwolf/lede</a> 命令下载好源代码，然后 cd lede 进入目录</li>
<li>./scripts/feeds update -a<br>./scripts/feeds install -a</li>
</ol>
<p>make menuconfig</p>
<ol>
<li>最后选好你要的路由，输入 make -j1 V=s （-j1 后面是线程数。第一次编译推荐用单线程，国内请尽量全局科学上网）即可开始编译你要的固件了。</li>
</ol>
<p>本套代码保证肯定可以编译成功。里面包括了 R9 所有源代码，包括 IPK 的。</p>
<p>你可以自由使用，但源码编译二次发布请注明我的 GitHub 仓库链接。谢谢合作！</p>
<p>特别提示：</p>
<ol>
<li>源代码中绝不含任何后门和可以监控或者劫持你的 HTTPS 的闭源软件，SSL 安全是互联网最后的壁垒。安全干净才是固件应该做到的。<br>2.如果你自认为 Koolshare 论坛或者其固件的脑残粉，本人不欢迎你使用本源代码。所以如果你是，那么使用过程中遇到任何问题本人概不回应。</li>
</ol>
<p>3.如有问题需要讨论，欢迎加入 QQ  2756093580</p>
<h2 id="插件详细清单"><a href="#插件详细清单" class="headerlink" title="插件详细清单"></a>插件详细清单</h2><p>OpenWrt 编译 LuCI —&gt; Applications 添加插件应用说明 【人人为我，我为人人】 2019.8.3 更新 ！！！</p>
<p>make menuconfig 进入定制界面<br>进入编译选项配置界面,.按照需要配置.( ‘*’ 代表编入固件，‘M’ 表示编译成模块或者IPK包， ‘空’不编译 )</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line">选择LuCI 配置：  常用</span><br><span class="line">-----------------------------------------------------------------------------------------</span><br><span class="line">L大雕 选择LuCI 配置：</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-accesscontrol  #访问时间控制</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-adbyby-plus   #广告屏蔽大师Plus +</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-arpbind  #IP&#x2F;MAC绑定</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-autoreboot  #高级重启</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-aliddns   #阿里DDNS客户端</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-ddns   #动态域名 DNS</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-filetransfer  #文件传输</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-firewall   #添加防火墙</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-frpc   #内网穿透 Frp</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-guest-wifi  #WiFi访客网络</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-ipsec-virtual**d  #virtual**服务器 IPSec</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-mwan   #MWAN负载均衡</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-mwan3   #MWAN3分流助手</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-nlbwmon   #网络带宽监视器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-p p t p-server  #virtual**服务器 p p t p</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-ramfree  #释放内存</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-samba   #网络共享(Samba)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-sfe  #Turbo ACC网络加速(开启Fast Path转发加速)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-sqm  #流量智能队列管理(QOS)</span><br><span class="line">-------------------------------------------------------------------------------------------</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-S-S R-plus   #S-S R兲朝上网Plus+</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-S-S R-plus ---&gt; Include V2ray  #V2Ray透明代理</span><br><span class="line">-------------------------------------------------------------------------------------------</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-syncdial  #多拨虚拟网卡(原macvlan)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-upnp   #通用即插即用UPnP(端口自动转发)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-v2ray-pro  #V2Ray透明代理</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-vlmcsd  #KMS服务器设置</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-vsftpd  #FTP服务器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-wifischedule  #WiFi 计划</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-wireless-regdb  #WiFi无线</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-wol   #WOL网络唤醒</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-wrtbwmon  #实时流量监测</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-xlnetacc  #迅雷快鸟</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-zerotier  #ZeroTier内网穿透</span><br><span class="line">Extra packages  ---&gt;  ipv6helper  #支持 ipv6</span><br><span class="line">Utilities  ---&gt;  open-vm-tools  #打开适用于VMware的VM Tools</span><br><span class="line"></span><br><span class="line">以下是全部：</span><br><span class="line">-----------------------------------------------------------------------------------------</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-accesscontrol  #访问时间控制</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-adblock   #ADB广告过滤</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-adbyby-plus  #广告屏蔽大师Plus +</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-adbyby   #广告过滤大师（已弃）</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-adkill   #广告过滤（已弃）</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-advanced-reboot  #Linksys高级重启</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-ahcp  #支持AHCPd</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-aliddns   #阿里DDNS客户端（已弃，集成ddns）</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-amule  #aMule下载工具</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-aria2 # Aria2下载工具</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-arpbind  #IP&#x2F;MAC绑定</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-asterisk  #支持Asterisk电话服务器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-attendedsysupgrade  #固件更新升级相关</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-autoreboot  #支持计划重启</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-bcp38  #BCP38网络入口过滤(不确定)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-bird4   #Bird 4(未知)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-bird6   #Bird 6(未知)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-bmx6  #BMX6路由协议</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-bmx7  #BMX7路由协议</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-caldav  #联系人</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-cjdns  #加密IPV6网络相关</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-clamav  #ClamAV杀毒软件</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-commands   #Shell命令模块</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-cshark   #CloudShark捕获工具</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-ddns   #动态域名 DNS</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-diag-core   #core诊断工具</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-dnscrypt-proxy  #DNSCrypt解决DNS污染</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-dnscrypt-dnsforwarder  #DNSForwarder防DNS污染</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-dnspod  #DNSPod</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-dump1090  #民航无线频率(不确定)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-dynapoint  #DynaPoint(未知)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-e2guardian   #Web内容过滤器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-familycloud   #家庭云盘</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-filetransfer  #文件传输</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-firewall   #添加防火墙</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-flowoffload   #Turbo ACC  FLOW转发加速(集成在sfe)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-freifunk-diagnostics   #freifunk组件 诊断(未知)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-freifunk-policyrouting  #freifunk组件 策略路由(未知)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-freifunk-widgets  #freifunk组件 索引(未知)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-frpc   #内网穿透 Frp</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-fwknopd  #Firewall Knock Operator服务器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-guest-wifi   #WiFi访客网络</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-gfwlist   #GFW域名列表（已弃）</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-hd-idle  #硬盘休眠</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-hnet  #Homenet Status家庭网络控制协议</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-kodexplorer  #KOD可道云私人网盘</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-kooldns  #virtual**服务器 ddns替代方案（已弃）</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-koolproxy  #KP去广告（已弃）</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-lxc   #LXC容器管理</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-meshwizard #网络设置向导</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-minidlna   #完全兼容DLNA &#x2F; UPnP-AV客户端的服务器软件</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-mjpg-streamer   #兼容Linux-UVC的摄像头程序</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-mmc-over-gpio   #添加SD卡操作界面（已弃）</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-multiwan   #多拨虚拟网卡（已弃）</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-mwan   #MWAN负载均衡</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-mwan3   #MWAN3分流助手</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-n2n_v2   #N2N内网穿透 N2N v2 virtual**服务</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-nft-qos  #QOS流控 Nftables版（已弃）</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-ngrokc  #Ngrok 内网穿透（已弃）</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-nlbwmon   #网络带宽监视器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-noddos  #NodDOS Clients 阻止DDoS攻击</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-ntpc   #NTP时间同步服务器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-ocserv  #OpenConnect virtual**服务</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-olsr  #OLSR配置和状态模块</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-olsr-services  #OLSR服务器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-olsr-viz   #OLSR可视化</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-ocserv   #OpenConnect virtual**服务（已弃）</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-openvirtual**  #Openvirtual**客户端</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-openvirtual**-server  #易于使用的Openvirtual**服务器 Web-UI</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-oscam   #OSCAM服务器（已弃）</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-p910nd   #打印服务器模块</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-pagekitee   #Pagekite内网穿透客户端</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-polipo  #Polipo代理(是一个小型且快速的网页缓存代理)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-pppoe-relay  #PPPoE NAT穿透 点对点协议(PPP)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-p p t p-server  #virtual**服务器 p p t p</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-privoxy  #Privoxy网络代理(带过滤无缓存)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-qos   #流量服务质量(QoS)流控</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-radicale   #CalDAV&#x2F;CardDAV同步工具</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-ramfree  #释放内存</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-rp-pppoe-server  #Roaring Penguin PPPoE Server 服务器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-samba   #网络共享(Samba)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-samba4   #网络共享(Samba4)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-sfe  #Turbo ACC网络加速(开启Fast Path转发加速)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-s-s   #SS兲朝上网（已弃）</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-s-s-libes  #SS-libev服务端</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-shairplay  #支持AirPlay功能</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-siitwizard  #SIIT配置向导  SIIT-Wizzard</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-simple-adblock  #简单的广告拦截</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-simple-softethervirtual**  #SoftEther virtual**服务器  NAT穿透（已弃）</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-splash  #Client-Splash是无线MESH网络的一个热点认证系统</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-sqm  #流量智能队列管理(QOS)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-squid   #Squid代理服务器</span><br><span class="line">-------------------------------------------------------------------------------------------</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-S-S R-plus   #S-S R兲朝上网Plus+</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-S-S R-plus ---&gt; Include s-s New Versiong  #新SS代理</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-S-S R-plus ---&gt; Include V2ray  #V2Ray透明代理</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-S-S R-plus ---&gt; Include Kcptun  #Kcptun代理</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-S-S R-plus ---&gt; Include s-sR Server  #S-S R客户端</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-S-S R-plus ---&gt; Include s-sR Socks and Tunnel  #S-S R代理</span><br><span class="line">-------------------------------------------------------------------------------------------</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-S-S R-pro  #S-S R-Pro</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-S-S Rserver-python  #s-sR Python服务器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-statistics  #流量监控工具</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-syncdial  #多拨虚拟网卡(原macvlan)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-tinyproxy  #Tinyproxy是 HTTP(S)代理服务器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-transmission   #BT下载工具</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-travelmate  #旅行路由器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-ttyd   #网页终端命令行</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-udpxy  #udpxy做组播服务器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-uhttpd  #uHTTPd Web服务器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-unblockmusic  #解锁网易云灰色歌曲</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-unbound  #Unbound DNS解析器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-upnp   #通用即插即用UPnP(端口自动转发)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-usb-printer   #USB 打印服务器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-v2ray-pro  #V2Ray透明代理（已弃，集成S-S R）</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-vlmcsd  #KMS服务器设置</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-vnstat   #vnStat网络监控(图表)</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-virtual**bypass  #virtual** BypassWebUI  绕过virtual**设置</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-vsftpd  #FTP服务器</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-watchcat  #断网检测功能与定时重启</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-webadmin  #Web管理页面设置</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-webshell  #网页命令行终端（已弃）</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-wifischedule  #WiFi 计划</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-wireguard  #virtual**服务器 WireGuard状态</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-wireless-regdb  #WiFi无线</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-wol   #WOL网络唤醒</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-wrtbwmon  #实时流量监测</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-xlnetacc  #迅雷快鸟</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-app-zerotier  #ZeroTier内网穿透</span><br><span class="line">LuCI ---&gt; Applications ---&gt; luci-i18n-qbittorrent-zh-cn  #BT下载工具(qBittorrent)</span><br><span class="line">---------------------------------------------------------------------------------------------------</span><br><span class="line">LuCI ---&gt; Collections ---&gt; luci   #添加luci (web界面管理)</span><br><span class="line">LuCI ---&gt; Modules ---&gt; Translations ---&gt; Simplified Chinese (zh-cn) #新版本中文语言包位置</span><br><span class="line">LuCI ---&gt; Themes ---&gt; luci-theme-bootstrap   #默认主题，大家可以自行增减插件</span><br><span class="line">LuCI ---&gt; Translations ---&gt; luci-i18n-chinese   #添加luci的中文语言包</span><br><span class="line">---------------------------------------------------------------------------------------------------</span><br><span class="line">支持 iPv6：</span><br><span class="line">Extra packages  ---&gt;  ipv6helper  （选定这个后下面几项自动选择了）</span><br><span class="line">Network  ---&gt;  odhcp6c</span><br><span class="line">Network  ---&gt;  odhcpd-ipv6only</span><br><span class="line">LuCI  ---&gt;  Protocols  ---&gt;  luci-proto-ipv6</span><br><span class="line">LuCI  ---&gt;  Protocols  ---&gt;  luci-proto-ppp</span><br></pre></td></tr></table></figure>

<p>这个地址应该是长期更新插件清单：<a href="https://www.right.com.cn/forum/thread-344825-1-1.html" target="_blank" rel="noopener">https://www.right.com.cn/forum/thread-344825-1-1.html</a></p>
<hr>
<p>有一个作者维护的frp的ipk：<a href="https://github.com/kuoruan/openwrt-frp" target="_blank" rel="noopener">https://github.com/kuoruan/openwrt-frp</a></p>
<hr>
<p>即使编译了ssr-plus之后，你发现在菜单里依然没有选项。因为作者又一次调皮了，居然给隐藏了。<br>输入以下代码后可以看到</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo 0xDEADBEEF &gt; &#x2F;etc&#x2F;config&#x2F;google_fu_mode</span><br></pre></td></tr></table></figure>
            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2019/11/02/%E6%90%AD%E5%BB%BAn2n%E5%AE%9E%E7%8E%B0%E7%82%B9%E5%AF%B9%E7%82%B9%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%EF%BC%8C%E7%BB%84%E4%BB%B6%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="搭建n2n实现点对点内网穿透，组件虚拟局域网" class="lazyload">
                    <h1>搭建n2n实现点对点内网穿透，组件虚拟局域网</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2019年11月02日</a>
            <a><i class="nexmoefont icon-areachart"></i>758 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 3 分钟</a>
        </div>

        <article>
            
                <p> <img data-sizes="auto" data-src="/images/938366627.png" alt="" class="lazyload"></p>
<p> <strong>说明：</strong>n2n 跟 Zerotier 相类似，然而 Zerotier 的设置方面更容易些，但稳定性取决于官方的服务器，由于国内的互联网环境，Zerotier 经常掉线。n2n 虽然设置起来麻烦一些，但稳定性取决于所选的服务器。只要有台有公网 ip 的服务器，就能远程访问内网的电脑、路由器或者其他设备。</p>
<p>  日常工作中一般经常会碰到企业跨网络、跨区域异地组网的需要,尤其是安防监控项目,在正常情况看来,近点的自己敷设光缆,远点的直接找运营商拉专线就行了,但是有时候跨地域组建起来就非常麻烦了，这时候虚拟组网的优势就体现出来了，在企业总部和分支机构之间创建VPN局域网，利用现有的互联网出口，虚拟出一条“专线”，将组织的分支机构和总部连接起来，组成一个大的局域网。</p>
<h2 id="安装教程"><a href="#安装教程" class="headerlink" title="安装教程"></a>安装教程</h2><p>官方提供的源码用的是很老的库，现在编译会报错，我这里用的是 meyerd 修正过的，但两者不能互通，所以如果服务器是用官方的，客户端必须使用官方的源码来编译。另外 n2n 还有 V1 和 V2 版本，这两者也是不能互通的，我这里选择的是 V2 版本， V1 版本编译和设置方面基本相同。</p>
<p><strong>n2n 源码</strong> （推荐修正版）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 官方旧版</span><br><span class="line">https:&#x2F;&#x2F;github.com&#x2F;ntop&#x2F;n2n</span><br><span class="line"></span><br><span class="line"># 修正版</span><br><span class="line">https:&#x2F;&#x2F;github.com&#x2F;meyerd&#x2F;n2n</span><br></pre></td></tr></table></figure>

<h3 id="Linux-编译-n2n"><a href="#Linux-编译-n2n" class="headerlink" title="Linux 编译 n2n"></a>Linux 编译 n2n</h3><p>安装必要运行库</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install gcc g++ cmake make libssl-dev</span><br></pre></td></tr></table></figure>

<p>编译</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~&#x2F;n2n&#x2F;n2n_v2&#x2F;build</span><br><span class="line">cd ~&#x2F;n2n&#x2F;n2n_v2&#x2F;build</span><br><span class="line">cmake ..</span><br><span class="line">make</span><br></pre></td></tr></table></figure>

<h3 id="Linux-交叉编译-Windows-版的-n2n"><a href="#Linux-交叉编译-Windows-版的-n2n" class="headerlink" title="Linux 交叉编译 Windows 版的 n2n"></a>Linux 交叉编译 Windows 版的 n2n</h3><p>安装 Mingw</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install mingw-w64</span><br></pre></td></tr></table></figure>

<p>安装 cmake</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install cmake</span><br></pre></td></tr></table></figure>

<p>获取 n2n 源码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;meyerd&#x2F;n2n.git</span><br></pre></td></tr></table></figure>

<p>修改在 n2n_v2 中的 cmake 文件夹中的 CMakeToolchainFileMingw32.cmake 里面的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SET(CMAKE_C_COMPILER i686-mingw32-gcc)</span><br><span class="line">SET(CMAKE_CXX_COMPILER i686-mingw32-g++)</span><br></pre></td></tr></table></figure>

<p>修改为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SET(CMAKE_C_COMPILER i686-w64-mingw32-gcc)</span><br><span class="line">SET(CMAKE_CXX_COMPILER i686-w64-mingw32-g++)</span><br></pre></td></tr></table></figure>

<p>开始编译</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~&#x2F;n2n&#x2F;n2n_v2&#x2F;build</span><br><span class="line">cd ~&#x2F;n2n&#x2F;n2n_v2&#x2F;build</span><br><span class="line">cmake -DCMAKE_TOOLCHAIN_FILE&#x3D;..&#x2F;cmake&#x2F;CMakeToolchainFileMingw32.cmake --build .&#x2F; ..&#x2F;</span><br><span class="line">make</span><br></pre></td></tr></table></figure>

<h2 id="关于使用"><a href="#关于使用" class="headerlink" title="关于使用"></a>关于使用</h2><h3 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;supernode -l 端口</span><br></pre></td></tr></table></figure>

<h3 id="Linux-客户端-需要权限"><a href="#Linux-客户端-需要权限" class="headerlink" title="Linux 客户端(需要权限)"></a>Linux 客户端(需要权限)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;edge -d n2n0 -c 虚拟局域网名 -k 密码 -m 指定物理mac地址(可选) -a 内网IP -l 服务端IP:端口号</span><br></pre></td></tr></table></figure>

<h3 id="Windows-客户端"><a href="#Windows-客户端" class="headerlink" title="Windows 客户端"></a>Windows 客户端</h3><p>市面上的 Windows 客户端有两个：一个是 <a href="https://www.moewah.com/go/aHR0cHM6Ly9zb3VyY2Vmb3JnZS5uZXQvcHJvamVjdHMvbjJuZWRnZWd1aS8=" target="_blank" rel="noopener">n2nedgegui</a>，另一个是 <a href="https://www.moewah.com/go/aHR0cDovL3d3dy52cG5ob3N0aW5nLmN6L24ybmd1aWVuLmV4ZQ==" target="_blank" rel="noopener">n2nguien</a>，前者用的是 V2 版本，后者 V1 和 V2 版本，但这两个用的是官方旧版的内核，如果服务端用的是修正的版本，需要把上面编译好的 edge 替换客户端安装文件夹内的 edge 。</p>
<p>我这里使用的是 n2nguien ，客户端安装文件夹内 V2 版是用 edge2.exe 来命名的，所以替换 V2 版的时候把名字改为 edge2.exe ，V1 版直接替换就行了。</p>
<p><img data-sizes="auto" data-src="/images/3452128005.jpg" alt="" class="lazyload"></p>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2019/10/24/WebStack-Laravel%EF%BC%9A%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BD%91%E5%9D%80%E5%AF%BC%E8%88%AA%E7%AB%99%E7%82%B9%EF%BC%88%E5%B8%A6%E5%90%8E%E5%8F%B0%EF%BC%89/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="WebStack-Laravel：搭建一个网址导航站点（带后台）" class="lazyload">
                    <h1>WebStack-Laravel：搭建一个网址导航站点（带后台）</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2019年10月24日</a>
            <a><i class="nexmoefont icon-areachart"></i>839 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 4 分钟</a>
        </div>

        <article>
            
                <p><img data-sizes="auto" data-src="/images/opt.gs_100001369.png" alt="" class="lazyload"></p>
<p><strong>说明：</strong>怎么快速的搭建一个导航网站？WebStack-Laravel 是一个开源的网址导航网站项目，具备完整的前后台。换句话说，我们可以自定义添加网站和图标，有时候浏览器收藏的网站很多不好管理，这时我们可以使用<code>WebStack-Laravel</code>对网站分别标注、归类，制作自己的网址导航。</p>
<p>项目地址：<a href="https://github.com/hui-ho/WebStack-Laravel" target="_blank" rel="noopener">https://github.com/hui-ho/WebStack-Laravel</a></p>
<h2 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h2><p><img data-sizes="auto" data-src="/images/opt.gs_100001370.jpeg" alt="" class="lazyload"></p>
<p><img data-sizes="auto" data-src="/images/opt.gs_100001371.jpeg" alt="" class="lazyload"></p>
<p><img data-sizes="auto" data-src="/images/opt.gs_100001372.jpeg" alt="" class="lazyload"></p>
<p><img data-sizes="auto" data-src="/images/opt.gs_100001373.jpeg" alt="" class="lazyload"></p>
<h2 id="部署安装"><a href="#部署安装" class="headerlink" title="部署安装"></a>部署安装</h2><p>博主使用的是军哥LNMP_v1.6一键安装包。本教程的安装环境如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PHP version 7.3.5 （建议php7.0以上）</span><br><span class="line">Composer version 1.8.5 （建议升级最新版本）</span><br><span class="line">nginx&#x2F;1.16.0</span><br><span class="line">MySQL version 5.6.44</span><br></pre></td></tr></table></figure>

<p><strong>如果没有安装composer，请运行下面的命令进行安装</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -sS https:&#x2F;&#x2F;getcomposer.org&#x2F;installer | php</span><br><span class="line">mv composer.phar &#x2F;usr&#x2F;local&#x2F;bin&#x2F;composer</span><br></pre></td></tr></table></figure>

<p>参考 <a href="https://lnmp.org/faq/lnmp-vhost-add-howto.html" target="_blank" rel="noopener">LNMP使用教程</a> 使用<code>lnmp</code>相关命令，添加网站、创建网站根目录、建立数据库。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#将域名修改成自己的再运行</span><br><span class="line">cd &#x2F;www&#x2F;wwwroot&#x2F;xx.com</span><br><span class="line">#克隆代码</span><br><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;hui-ho&#x2F;WebStack-Laravel.git</span><br><span class="line">cd &#x2F;www&#x2F;wwwroot&#x2F;xx.com&#x2F;WebStack-Laravel</span><br></pre></td></tr></table></figure>

<p><strong>安装依赖</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer install</span><br></pre></td></tr></table></figure>

<p><strong>修改配置</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#拷贝文件并重命名为.env</span><br><span class="line">cp .env.example .env</span><br></pre></td></tr></table></figure>

<p>使用<code>vi</code>命令或<code>nano</code>命令修改<code>WebStack-Laravel</code>目录下的<code>.env</code>文件，对<code>APP_URL</code>、<code>DB_DATABASE</code>、<code>DB_USERNAME</code>、<code>DB_PASSWORD</code>进行修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">APP_URL&#x3D;http:&#x2F;&#x2F;localhost</span><br><span class="line">...</span><br><span class="line">DB_DATABASE&#x3D;database</span><br><span class="line">DB_USERNAME&#x3D;username</span><br><span class="line">DB_PASSWORD&#x3D;password</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p><strong>生成KEY</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan key:generate</span><br></pre></td></tr></table></figure>

<p><strong>迁移数据</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan migrate:refresh --seed</span><br></pre></td></tr></table></figure>

<p><strong>开启服务</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan serve</span><br></pre></td></tr></table></figure>

<p>注意：默认 Laravel 开启服务后，默认会监听在 <code>localhost</code> 的 <code>8000</code> 端口上。如遇到端口冲突问题，可以可以使用 <code>--host</code>参数与 <code>—port</code>参数来更换监听的接口地址或端口号。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php artisan serve --host&#x3D;0.0.0.0 --port&#x3D;9889</span><br></pre></td></tr></table></figure>

<h2 id="Nginx-反代"><a href="#Nginx-反代" class="headerlink" title="Nginx 反代"></a>Nginx 反代</h2><p>修改vhost主机对应的nginx配置文件<code>xx.com.conf</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name xx.com;</span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        proxy_pass http:&#x2F;&#x2F;127.0.0.1:9889;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header X-Remote-Port $remote_port;</span><br><span class="line">        proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">        proxy_redirect off;</span><br><span class="line">    &#125;</span><br><span class="line">    location ~ ^&#x2F;(\.user.ini|\.htaccess|\.git|\.svn|\.project|LICENSE|README.md)</span><br><span class="line">    &#123;</span><br><span class="line">        return 404;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>重启Nginx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;etc&#x2F;init.d&#x2F;nginx restart</span><br></pre></td></tr></table></figure>

<p>正常情况下，现在已经可以通过<code>xx.com</code>域名直接访问。</p>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><p><strong>问题1：</strong>使用<code>composer install</code>命令安装依赖过程中遇到<code>The Process class relies on proc_open, which is not available on your PHP installation.</code>这类的报错。是因为部分所需的<code>php</code>函数被禁用导致的。</p>
<p><strong>解决方法：</strong>找到<code>php.ini</code>文件，并搜索<code>disable_functions</code>找到类似如下内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">disable_functions &#x3D; passthru,exec,system,chroot,scandir,chgrp,chown,shell_exec,proc_open,proc_get_status,popen,ini_alter,ini_restore,dl,openlog,syslog,readlink,symlink,popepassthru,stream_socket_server</span><br></pre></td></tr></table></figure>

<p>找到<code>proc_open</code>、<code>proc_get_status</code>并删除即可。</p>
<p><strong>问题2：</strong>移数据出错，比如出现<code>SQLSTATE[HY000] [2002] .......Connection timed out</code>报错，基本是因为<code>.env</code>文件，数据库配置有误导致，请自行核查配置准确性。</p>
<p><strong>问题3：</strong>如何强制Laravel使用HTTPS？<br><strong>解决方法：</strong>找到并修改<code>AppServiceProvider</code>文件，在<code>boot</code>中添加一行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\URL::forceScheme(&#39;https&#39;);</span><br></pre></td></tr></table></figure>

<p>现在你的所有生成的路由链接已经默认是 HTTPS 了。当然你也可以用 Nginx 来做非 HTTPS 跳转，只是我觉得这个方法更加简单。需要注意的是：<code>forceScheme</code> 这个函数在 5.4 的时候更换过名称 , L5.3 及以下版本请使用 <code>\URL::forceSchema(&#39;https&#39;);</code>。</p>

            
        </article>
    </div>
    
    <div class="nexmoe-post">
        <a href="/2019/10/24/Windows%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%BF%E7%94%A8%E8%BF%90%E8%A1%8C%E5%91%BD%E4%BB%A4%E8%87%AA%E5%8A%A8%E5%85%B3%E6%9C%BA%E6%88%96%E5%AE%9A%E6%97%B6%E5%85%B3%E6%9C%BA/">
            
                <div class="nexmoe-post-cover mdui-ripple" style="padding-bottom: 66.66666666666666%;"> 
                    <img data-src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg" data-sizes="auto" alt="Windows操作系统使用运行命令自动关机或定时关机" class="lazyload">
                    <h1>Windows操作系统使用运行命令自动关机或定时关机</h1>
                </div>
            
        </a>

        <div class="nexmoe-post-meta nexmoe-rainbow">
            <a><i class="nexmoefont icon-calendar-fill"></i>2019年10月24日</a>
            <a><i class="nexmoefont icon-areachart"></i>856 字</a>
            <a><i class="nexmoefont icon-time-circle-fill"></i>大概 3 分钟</a>
        </div>

        <article>
            
                <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>经常下载东西或者处理数据的时候想让电脑自动关机，然后就在想如何不借助工具的情况下让电脑（Windows10）进行自动关机，然后查阅了资料就有这篇水文了。</p>
<hr>
<h2 id="运行命令关机法"><a href="#运行命令关机法" class="headerlink" title="运行命令关机法"></a>运行命令关机法</h2><p>首先点击<code>开始</code>→<code>运行</code>（你也可以使用组合快捷键<code>Win+R</code>一步到位），输入如下指令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutdown -s -t 3600</span><br></pre></td></tr></table></figure>

<p>其中3600的单位是秒，小伙伴们可以根据自己的需求进行制定，缙哥哥觉得小姐姐们一个小时应该能到家了，所以定了3600</p>
<p>当然，你如果忽然觉得时间不够，你还可以通过下面命令取消</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shutdown -a</span><br></pre></td></tr></table></figure>

<p>神马，还要爷计算多少秒？那你可以试试输入下方指令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">at 23:59 shutdown -s</span><br></pre></td></tr></table></figure>

<p>其中23:59是代表着关机时间，小伙伴们同样可根据需求来这样就不用去计算多少秒了。</p>
<hr>
<h2 id="关机命令详解"><a href="#关机命令详解" class="headerlink" title="关机命令详解"></a>关机命令详解</h2><p>Shutdown.exe的参数，每个都具有特定的用途，执行每一个都会产生不同的效果，比如“-s”就表示关闭本地计算机，“-a”表示取消关机操作，想必聪明如你看了上面的指令应该也能看出来了，下面缙哥哥列出了更多关机命令参数，大家可以在Shutdown.exe中按需使用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">-i         显示图形用户界面(GUI)。这必须是第一个选项。</span><br><span class="line">-l         注销。这不能与 -m 或 -d 选项一起使用。</span><br><span class="line">-s         关闭计算机。</span><br><span class="line">-sg        关闭计算机。在下一次启动时，重启任何注册的应用程序。</span><br><span class="line">-r         完全关闭并重启计算机。</span><br><span class="line">-g         完全关闭并重新启动计算机。在重新启动系统后，重启任何注册的应用程序。</span><br><span class="line">-a         中止系统关闭。这只能在超时期间使用。与 -fw 结合使用，以清除任何未完成的至固件的引导。</span><br><span class="line">-p         关闭本地计算机，没有超时或警告。可以与 -d 和 -f 选项一起使用。</span><br><span class="line">-h         休眠本地计算机。可以与 -f 选项一起使用。</span><br><span class="line">-hybrid    执行计算机关闭并进行准备以快速启动。必须与 -s 选项一起使用。</span><br><span class="line">-fw        与关闭选项结合使用，使下次启动转到固件用户界面。</span><br><span class="line">-e         记录计算机意外关闭的原因。</span><br><span class="line">-o         转到高级启动选项菜单并重新启动计算机。必须与 -r 选项一起使用。</span><br><span class="line">-m \\computer 指定目标计算机。</span><br><span class="line">-t xxx     将关闭前的超时时间设置为 xxx 秒。有效范围是 0-315360000 (10 年)，默认值为 30。如果超时时间大于 0，则默示为 -f 参数。</span><br><span class="line">-c &quot;comment&quot; 有关重新启动或关闭的原因的注释。最多允许 512 个字符。</span><br><span class="line">-f         强制关闭正在运行的应用程序而不事先警告用户。如果为 -t 参数指定大于 0 的值，则默示为 -f 参数。</span><br><span class="line">-d [p|u:]xx:yy  提供重新启动或关闭的原因。</span><br><span class="line">p         指示重启或关闭是计划内的。</span><br><span class="line">u         指示原因是用户定义的。</span><br><span class="line">          如果未指定 p 也未指定 u，则重新启动或关闭是计划外的。</span><br><span class="line">xx        是主要原因编号(小于 256 的正整数)。</span><br><span class="line">yy        是次要原因编号(小于 65536 的正整数)。</span><br></pre></td></tr></table></figure>
            
        </article>
    </div>
    
</section>

    <nav class="nexmoe-page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="nexmoefont icon-right"></i></a>
    </nav>
  
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js?v=1"></script>
<script >hljs.initHighlightingOnLoad();</script>


    <script src="https://cdn.jsdelivr.net/gh/xtaodada/xtaodada.github.io@0.0.2/copy.js"></script>


<script src="/js/app.js?v=1591714365746"></script>
  





</body>

</html>
